<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        http-equiv="X-UA-Compatible"
        content="IE=edge"
    >
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <title>Document</title>
</head>

<body>
    <div
        id="process"
        style="width:0;height:20px;background:#2e8def"
    ></div>
    <button id="btn">开始</button>
    <script>
        const btn = document.getElementById('btn')
        const process = document.getElementById('process')
        let lastStart

        function handlerProcess() {
            process.style.width = process.offsetWidth + 1 + 'px'
            process.innerHTML = process.offsetWidth + '%'

            const current = Date.now()
            console.log(current - lastStart)
            lastStart = current

            if (process.offsetWidth < 100) {
                requestAnimationFrame(handlerProcess)
            }
        }

        btn.addEventListener('click', () => {
            process.style.width = 0
            lastStart = Date.now()

            requestAnimationFrame(handlerProcess)
        })

    </script>
</body>

</html>