<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
// function myTimer (callback, time) {
//   setTimeout(function () {
//     callback()
//   }, time)
// }
// myTimer(function () {
//   console.log(1111)
// }, 1000)


// function wait (time) {
//   return new Promise(resolve => {
//     setTimeout(function () {
//       resolve('111')
//     }, time)
//   })
// }
//
// wait(1000).then(res => {
//   console.log('数据' + res)
// }, e => {
//   console.log('error' + e)
// })
//
// wait(1000).then(res => {
//   console.log('返回' + res)
// }).catch(e => {
//   console.log('错误' + e)
// })

// function p1 () {
//   return new Promise(resolve => {
//     setTimeout(() => { resolve(11) }, 1000)
//   })
// }
// function p2 () {
//   return new Promise((resolve, reject) => {
//     setTimeout(() => { reject(22) }, 2000)
//   })
// }
// function p3 () {
//   return new Promise((resolve, reject) => {
//     setTimeout(() => { resolve(33) }, 4000)
//   })
// }
// // 都没有报错
// Promise.all([ p1(), p3() ]).then(res => {
//   console.log(res) // [11 , 33]
// }).catch(e => {
//   console.log('error' + e)
// })
//
// // 异步中有一个报错
// Promise.all([ p1(), p2(),p3() ]).then(res => {
//   console.log('数据' + res)
// }).catch(e => {
//   console.log('error' + e)  // error 22
// })
//
//
// // 只要p1、p2之中有一个实例率先改变状态，p的状态就跟着改变
// Promise.race([p1(),p2()]).then(res=>{
//   console.log(res)  // 11
// }).catch(e => {
//   console.log('error'+e)
// })
//
// Promise.race([p2(),p3()]).then(res=>{
//   console.log(res)
// }).catch(e => {
//   console.log('error'+e)  // 22
// })

// function p1 () {
//   return new Promise(resolve => {
//     setTimeout(() => {
//       resolve(11)
//     }, 1000)
//   })
// }
//
// (async function () {
//   try {
//     let res = await p1()
//     console.log(res)
//   } catch (e) {
//     console.log('error' + e)
//   }
// })()

var p = new Promise(resolve => {
  console.log(1)
  resolve(2)
  console.log(3)
})
p.then(value => {
  console.log(value)
})
console.log(4)
// 1,3,4,2

</script>
</body>
</html>