<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        http-equiv="X-UA-Compatible"
        content="IE=edge"
    >
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <title>Document</title>
</head>

<body>
    <input
        id="input"
        type="text"
    />
    <div id="content"></div>
    <script>
        const { observable, ovserve } = (() => {
            const queuedObserve = new Set()
            const ovserve = (fn) => {
                queuedObserve.add(fn)
            }
            const observable = (obj) => {
                return new Proxy(obj, {
                    get(target, key) {
                        return target[key]
                    },
                    set(target, key, value) {
                        target[key] = value
                        queuedObserve.forEach((fn) => {
                            fn()
                        })
                    }
                })
            }
            return {
                ovserve,
                observable
            }
        })()

        const data = observable({
            value: ''
        })
        const input = document.getElementById('input')
        const content = document.getElementById('content')
        const changeData = () => {
            content.innerHTML = data.value
        }
        ovserve(changeData)

        input.oninput = (e) => {
            data.value = e.target.value
        }
    </script>
</body>

</html>