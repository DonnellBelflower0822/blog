<!DOCTYPE html>
<html lang="en-zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP | 学习笔记</title>
    <meta name="description" content="我要好好">
    
    
    <link rel="preload" href="/inventory/dist/assets/css/0.styles.1f692f57.css" as="style"><link rel="preload" href="/inventory/dist/assets/js/app.13c8190b.js" as="script"><link rel="preload" href="/inventory/dist/assets/js/8.5da826ae.js" as="script"><link rel="prefetch" href="/inventory/dist/assets/js/6.e89ce3dd.js"><link rel="prefetch" href="/inventory/dist/assets/js/2.4d942548.js"><link rel="prefetch" href="/inventory/dist/assets/js/3.35fbc508.js"><link rel="prefetch" href="/inventory/dist/assets/js/4.6bde540b.js"><link rel="prefetch" href="/inventory/dist/assets/js/5.cae7823b.js"><link rel="prefetch" href="/inventory/dist/assets/js/7.95de19e5.js"><link rel="prefetch" href="/inventory/dist/assets/js/9.1610b143.js"><link rel="prefetch" href="/inventory/dist/assets/js/10.a73c564b.js"><link rel="prefetch" href="/inventory/dist/assets/js/11.87eeaee2.js"><link rel="prefetch" href="/inventory/dist/assets/js/12.b8589a29.js"><link rel="prefetch" href="/inventory/dist/assets/js/13.7a908974.js"><link rel="prefetch" href="/inventory/dist/assets/js/14.fea9d302.js"><link rel="prefetch" href="/inventory/dist/assets/js/15.279524a4.js"><link rel="prefetch" href="/inventory/dist/assets/js/16.23a4771c.js"><link rel="prefetch" href="/inventory/dist/assets/js/17.6cb70f6d.js"><link rel="prefetch" href="/inventory/dist/assets/js/18.5700d9e2.js"><link rel="prefetch" href="/inventory/dist/assets/js/19.c2f78980.js"><link rel="prefetch" href="/inventory/dist/assets/js/20.51dd812a.js">
    <link rel="stylesheet" href="/inventory/dist/assets/css/0.styles.1f692f57.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/inventory/dist/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/inventory/dist/doc/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/inventory/dist/note/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/inventory/dist/concat/" class="nav-link">联系我</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/inventory/dist/doc/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/inventory/dist/note/" class="nav-link">笔记</a></div><div class="nav-item"><a href="/inventory/dist/concat/" class="nav-link">联系我</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/inventory/dist/doc/JS.html" class="sidebar-link">JS</a></li><li><a href="/inventory/dist/doc/OOP.html" class="sidebar-link">面向对象</a></li><li><a href="/inventory/dist/doc/DOM.html" class="sidebar-link">DOM</a></li><li><a href="/inventory/dist/doc/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/inventory/dist/doc/blog.html" class="sidebar-link">工作笔记</a></li><li><a href="/inventory/dist/doc/vue.html" class="sidebar-link">vue</a></li><li><a href="/inventory/dist/doc/mp.html" class="sidebar-link">小程序</a></li><li><a href="/inventory/dist/doc/HTTP.html" class="active sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#ajax" class="sidebar-link">ajax</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#简单封装" class="sidebar-link">简单封装</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#几种ajax请求方式" class="sidebar-link">几种ajax请求方式</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#get和post区别" class="sidebar-link">get和post区别</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#jsonp" class="sidebar-link">jsonp</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#cors：跨域资源共享" class="sidebar-link">CORS：跨域资源共享</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#代理" class="sidebar-link">代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#http协议类" class="sidebar-link">Http协议类</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#http报文" class="sidebar-link">HTTP报文</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#请求报文" class="sidebar-link">请求报文</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#响应报文" class="sidebar-link">响应报文</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#http状态码" class="sidebar-link">http状态码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#总体介绍" class="sidebar-link">总体介绍</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#详细点" class="sidebar-link">?? 详细点</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#cookie-sessionstorage和localstorage" class="sidebar-link">cookie,sessionStorage和localStorage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#简单使用" class="sidebar-link">简单使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#从输入url到得到html的详细过程" class="sidebar-link">从输入url到得到html的详细过程</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#浏览器渲染过程" class="sidebar-link">浏览器渲染过程</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#性能优化" class="sidebar-link">性能优化</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#重排reflow" class="sidebar-link">重排Reflow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#触发reflow" class="sidebar-link">触发Reflow</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#重绘repaint" class="sidebar-link">重绘Repaint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#触发repaint" class="sidebar-link">触发Repaint</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#两者关系" class="sidebar-link">两者关系</a></li></ul></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#重绘和回流（重排）的区别和关系？" class="sidebar-link">重绘和回流（重排）的区别和关系？</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#如何最小化重绘-repaint-和回流-reflow-？" class="sidebar-link">如何最小化重绘(repaint)和回流(reflow)？</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#跨域携带cookie" class="sidebar-link">跨域携带cookie</a></li><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#安全问题" class="sidebar-link">安全问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/inventory/dist/doc/HTTP.html#xss跨站脚本攻击" class="sidebar-link">xss跨站脚本攻击</a></li></ul></li></ul></li><li><a href="/inventory/dist/doc/arithmetic.html" class="sidebar-link">算法</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="http"><a href="#http" aria-hidden="true" class="header-anchor">#</a> HTTP</h1> <ul><li>协议</li> <li>从浏览器地址栏输入url到显示页面的步骤</li> <li>如何进行网站性能优化</li> <li>HTTP状态码及其含义</li> <li>https://github.com/poetries/FE-Interview-Questions/blob/master/HTTP.md</li> <li>安全问题</li></ul> <h2 id="ajax"><a href="#ajax" aria-hidden="true" class="header-anchor">#</a> ajax</h2> <blockquote><p>异步的javascript和xml</p></blockquote> <ul><li><code>XMLHttpRequest</code> 创建ajax对象</li> <li><code>request.open(method,url,async)</code> 连接服务器
<ul><li><code>method</code>:发送请求的方法 <code>GET/POST</code></li> <li><code>url</code>:请求地址</li> <li><code>async</code>:是否异步传输,true异步传输</li></ul></li> <li><code>request.send(string)</code> 发送请求
<ul><li><code>GET</code>请求无需string</li> <li><code>POST</code>需要带上string，</li></ul></li> <li><code>request.onreadystatechange=fn</code> 接受服务器响应数据</li> <li><code>request.readyState</code> 响应返回所处状态
<ul><li>0 未调用open()</li> <li>1 已经调用send(),正在发送请求</li> <li>2 send()完成，已经收到全部响应内容</li> <li>3 正在解析响应内容</li> <li>4 响应内容解析完毕，可以给客户端使用</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建ajax对象</span>
<span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 判断请求状态request.onreadystatechange</span>
request<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// request.readyState 响应返回所处状态</span>
  <span class="token comment">// 0 未调用open()</span>
  <span class="token comment">// 1 已调用send()，正在发送请求</span>
  <span class="token comment">// 2 send()方法完成，已经收到全部响应内容</span>
  <span class="token comment">// 3 正在解析响应内容</span>
  <span class="token comment">// 4 响应内容解析完毕，可以给客户端使用</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获得字符串形式的响应数据</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="简单封装"><a href="#简单封装" aria-hidden="true" class="header-anchor">#</a> 简单封装</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ajax</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建ajax对象</span>
  <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> method <span class="token operator">=</span> options<span class="token punctuation">.</span>method <span class="token operator">||</span> <span class="token string">'GET'</span>
  method <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> options<span class="token punctuation">.</span>data
  <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 把参数带在url上</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      params <span class="token operator">+=</span> <span class="token string">'&amp;'</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> data<span class="token punctuation">[</span> key <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 连接服务器</span>
  <span class="token comment">// 发送请求</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span>
    request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    request<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    url <span class="token operator">+=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> params <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'?'</span> <span class="token operator">+</span> params<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 等待结果</span>
  request<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="几种ajax请求方式"><a href="#几种ajax请求方式" aria-hidden="true" class="header-anchor">#</a> 几种ajax请求方式</h2> <ul><li>get 获取数据</li> <li>post 上传数据</li> <li>put 修改数据</li> <li>delete 删除数据</li> <li>head 获取报文首部</li></ul> <h2 id="get和post区别"><a href="#get和post区别" aria-hidden="true" class="header-anchor">#</a> get和post区别</h2> <table><thead><tr><th></th> <th>get</th> <th>post</th></tr></thead> <tbody><tr><td>参数位置</td> <td>url</td> <td>request body(请求体)</td></tr> <tr><td>大小限制</td> <td>决定在浏览器的参数长度</td> <td>理论上没有限制</td></tr> <tr><td>功能</td> <td>获取数据</td> <td>上传数据</td></tr> <tr><td>安全</td> <td>比较不安全</td> <td>比较安全</td></tr> <tr><td>缓存</td> <td>浏览器主动缓存</td> <td>不会缓存</td></tr> <tr><td>浏览器回退</td> <td>get回退是无害的</td> <td>post会再次请求</td></tr></tbody></table> <h2 id="跨域"><a href="#跨域" aria-hidden="true" class="header-anchor">#</a> 跨域</h2> <blockquote><p>因为浏览器出于安全考虑，有同源策略</p></blockquote> <blockquote><p>如果协议、域名或者端口有一个不同就是跨域，Ajax 请求会失败。</p></blockquote> <h3 id="jsonp"><a href="#jsonp" aria-hidden="true" class="header-anchor">#</a> jsonp</h3> <blockquote><p>解决get的跨域</p></blockquote> <h4 id="原理"><a href="#原理" aria-hidden="true" class="header-anchor">#</a> 原理</h4> <ul><li>利用script标签的src不受同源策略限制，可以请求第三方服务器数据</li> <li>link和img也有这特性，img可以用于埋点</li> <li>需要后端配合</li></ul> <h4 id="简单实现"><a href="#简单实现" aria-hidden="true" class="header-anchor">#</a> 简单实现</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'https://c.y.qq.com/tips/fcgi-bin/fcg_music_red_dota.fcg?g_tk=153730533&amp;jsonpCallback=MusicJsonCallback7917118951592015&amp;loginUin=759811542&amp;hostUin=0&amp;format=jsonp&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0&amp;ct=24&amp;qq=759811542&amp;cid=205360410&amp;reqtype=1&amp;from=2'</span>

<span class="token keyword">function</span> <span class="token function">jsonp</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> jsonpCallback<span class="token punctuation">,</span> success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
  script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span>
  <span class="token comment">// 加载完毕立即执行</span>
  script<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token operator">=</span> <span class="token boolean">true</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> url
  window<span class="token punctuation">[</span> jsonpCallback <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    success <span class="token operator">&amp;&amp;</span> <span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">jsonp</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token string">'jsonpCallback'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="cors：跨域资源共享"><a href="#cors：跨域资源共享" aria-hidden="true" class="header-anchor">#</a> CORS：跨域资源共享</h3> <p><strong>做法</strong></p> <ul><li>服务器设置Access-Control-Allow-OriginHTTP响应头之后，浏览器将会允许跨域请求</li> <li>Access-Control-Allow-OriginHTTP:*</li> <li>Access-Control-Allow-OriginHTTP:http://a.com</li></ul> <h3 id="代理"><a href="#代理" aria-hidden="true" class="header-anchor">#</a> 代理</h3> <ul><li>开发时设置代理</li> <li>上线时配置nginx</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// vuecli3.0</span>
<span class="token comment">// vue.config.js</span>
<span class="token comment">// /api/getDiscList/musichall/fcgi-bin =&gt; https://c.y.qq.com/musichall/fcgi-bin</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
     proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'/api/getDiscList'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          target<span class="token punctuation">:</span> <span class="token string">'https://c.y.qq.com'</span><span class="token punctuation">,</span>
          changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 将/api/getDiscList 替换成空</span>
            <span class="token string">'^/api/getDiscList'</span><span class="token punctuation">:</span> <span class="token string">''</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="http协议类"><a href="#http协议类" aria-hidden="true" class="header-anchor">#</a> Http协议类</h2> <ul><li>无连接：连接一次，就会断掉</li> <li>无状态：不能区分两次连接的是否同一个人</li> <li>灵活：可以通过http请求头的数据类型可以实现各种类型数据传输</li> <li>简单快速：</li></ul> <h2 id="http报文"><a href="#http报文" aria-hidden="true" class="header-anchor">#</a> HTTP报文</h2> <h3 id="请求报文"><a href="#请求报文" aria-hidden="true" class="header-anchor">#</a> 请求报文</h3> <ul><li>请求行：方法，url，http协议</li> <li>请求头：请求数据类型</li> <li>空行：</li> <li>请求体：数据</li></ul> <h3 id="响应报文"><a href="#响应报文" aria-hidden="true" class="header-anchor">#</a> 响应报文</h3> <ul><li>响应行：http协议 状态码</li> <li>响应头：</li> <li>空行：</li> <li>响应体：数据</li></ul> <h2 id="http状态码"><a href="#http状态码" aria-hidden="true" class="header-anchor">#</a> http状态码</h2> <h3 id="总体介绍"><a href="#总体介绍" aria-hidden="true" class="header-anchor">#</a> 总体介绍</h3> <ul><li>1开头： 指示信息</li> <li>2开头：成功处理请求的状态代码</li> <li>3开头：重定向</li> <li>4开头：客户端出错</li> <li>5开头：服务器出错</li></ul> <h3 id="详细点"><a href="#详细点" aria-hidden="true" class="header-anchor">#</a> ?? 详细点</h3> <table><thead><tr><th>状态码</th> <th>说明</th></tr></thead> <tbody><tr><td>200(成功)</td> <td>客户端请求成功</td></tr> <tr><td>301</td> <td>永久重定向</td></tr> <tr><td>302</td> <td>临时重定向</td></tr> <tr><td>304</td> <td>浏览器有缓存，不用从服务器中取文件</td></tr> <tr><td>400</td> <td>客户端请求有语法错误，不能被服务器所理解</td></tr> <tr><td>401</td> <td>请求未经授权</td></tr> <tr><td>403</td> <td>资源被禁止访问</td></tr> <tr><td>404</td> <td>请求资源不存在</td></tr> <tr><td>500</td> <td>服务端错误</td></tr> <tr><td>503</td> <td>服务端错误</td></tr></tbody></table> <h2 id="cookie-sessionstorage和localstorage"><a href="#cookie-sessionstorage和localstorage" aria-hidden="true" class="header-anchor">#</a> cookie,sessionStorage和localStorage</h2> <table><thead><tr><th></th> <th style="text-align:center">cookie</th> <th style="text-align:center">localStorage</th> <th style="text-align:center">sessionStorage</th> <th style="text-align:center">indexDB</th></tr></thead> <tbody><tr><td>存储大小</td> <td style="text-align:center">4k</td> <td style="text-align:center">5m</td> <td style="text-align:center">5m</td> <td style="text-align:center">无限</td></tr> <tr><td>数据生命周期</td> <td style="text-align:center">后端设置过期时间内有效</td> <td style="text-align:center">不主动清除，一直都在</td> <td style="text-align:center">页面关闭就清除</td> <td style="text-align:center">不主动清除，一直都在</td></tr> <tr><td>通信</td> <td style="text-align:center">同源的http请求头中携带</td> <td style="text-align:center">不参与</td> <td style="text-align:center">不参与</td> <td style="text-align:center">不参与</td></tr> <tr><td>是否有同源策略</td> <td style="text-align:center">有</td> <td style="text-align:center">有</td> <td style="text-align:center">有</td> <td style="text-align:center"></td></tr></tbody></table> <h3 id="简单使用"><a href="#简单使用" aria-hidden="true" class="header-anchor">#</a> 简单使用</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="从输入url到得到html的详细过程"><a href="#从输入url到得到html的详细过程" aria-hidden="true" class="header-anchor">#</a> 从输入url到得到html的详细过程</h2> <ul><li>浏览器根据dns服务器得到域名的ip地址</li> <li>向这个ip服务器发送http请求</li> <li>服务器收到，处理并返回http请求</li> <li>浏览器接收到返回内容</li></ul> <h2 id="浏览器渲染过程"><a href="#浏览器渲染过程" aria-hidden="true" class="header-anchor">#</a> 浏览器渲染过程</h2> <ul><li>拿到html经过解析成DOM树</li> <li>拿到css经过解析成css树</li> <li>把DOM树和CSS树合成渲染树</li> <li>通过layout:依照盒子模型，计算出每个节点在屏幕中的位置及尺寸</li> <li>把渲染树通过浏览器绘制出来</li></ul> <h2 id="性能优化"><a href="#性能优化" aria-hidden="true" class="header-anchor">#</a> 性能优化</h2> <ul><li>减少 HTTP 请求数量：css精灵，采用lazyload</li> <li>采用字体图标</li> <li>采用cdn加速</li> <li>小图片使用base64</li> <li>静态资源开启gzip压缩</li> <li>组件异步加载</li> <li>按需引入第三方包</li></ul> <h2 id="重排reflow"><a href="#重排reflow" aria-hidden="true" class="header-anchor">#</a> 重排Reflow</h2> <blockquote><p>当可见节点位置及尺寸发生变化时会发生重排</p></blockquote> <blockquote><p>每个元素都有自己的盒子模型，这些都需要浏览器根据各种样式计算，并根据计算结果将元素放在它该出现的位置，这个过程称之为reflow</p></blockquote> <h3 id="触发reflow"><a href="#触发reflow" aria-hidden="true" class="header-anchor">#</a> 触发Reflow</h3> <ul><li>新增，修改，删除DOM节点</li> <li>移动DOM</li> <li>滚动</li> <li>改变元素字体大小</li></ul> <h2 id="重绘repaint"><a href="#重绘repaint" aria-hidden="true" class="header-anchor">#</a> 重绘Repaint</h2> <blockquote><p>改变某个元素的背景色、文字颜色、边框颜色等等不影响它周围或内部布局的属性时</p></blockquote> <blockquote><p>改变页面呈现内容都需要重绘</p></blockquote> <h3 id="触发repaint"><a href="#触发repaint" aria-hidden="true" class="header-anchor">#</a> 触发Repaint</h3> <ul><li>DOM改动</li> <li>CSS动画</li></ul> <h3 id="两者关系"><a href="#两者关系" aria-hidden="true" class="header-anchor">#</a> 两者关系</h3> <ul><li>重绘不一定导致重排</li> <li>重排一定会导致重绘</li></ul> <h2 id="重绘和回流（重排）的区别和关系？"><a href="#重绘和回流（重排）的区别和关系？" aria-hidden="true" class="header-anchor">#</a> 重绘和回流（重排）的区别和关系？</h2> <ul><li>重绘：当渲染树中的元素外观（如：颜色）发生改变，不影响布局时，产生重绘</li> <li>回流：当渲染树中的元素的布局（如：尺寸、位置、隐藏/状态状态）发生改变时，产生重绘回流</li> <li>注意：JS获取Layout属性值（如：offsetLeft、scrollTop、getComputedStyle等）也会引起回流。因为浏览器需要通过回流计算最新值</li> <li>回流必将引起重绘，而重绘不一定会引起回流</li></ul> <h2 id="如何最小化重绘-repaint-和回流-reflow-？"><a href="#如何最小化重绘-repaint-和回流-reflow-？" aria-hidden="true" class="header-anchor">#</a> 如何最小化重绘(repaint)和回流(reflow)？</h2> <ul><li>需要要对元素进行复杂的操作时，可以先隐藏(display:&quot;none&quot;)，操作完成后再显示</li> <li>需要创建多个DOM节点时，使用DocumentFragment创建完后一次性的加入document</li> <li>缓存Layout属性值，如：var left = elem.offsetLeft; 这样，多次使用 left 只产生一次回流</li> <li>尽量避免用table布局（table元素一旦触发回流就会导致table里所有的其它元素回流）</li> <li>避免使用css表达式(expression)，因为每次调用都会重新计算值（包括加载页面）</li> <li>尽量使用 css 属性简写，如：用 border 代替 border-width, border-style, border-color</li> <li>批量修改元素样式：elem.className 和 elem.style.cssText 代替 elem.style.xxx</li></ul> <h2 id="跨域携带cookie"><a href="#跨域携带cookie" aria-hidden="true" class="header-anchor">#</a> 跨域携带cookie</h2> <div class="language- extra-class"><pre class="language-text"><code>// 前端
xhr.withCredentials=true
// 后端
Access-Control-Allow-Origin: a.com
Access-Control-Allow-Credentials: true
</code></pre></div><h2 id="安全问题"><a href="#安全问题" aria-hidden="true" class="header-anchor">#</a> 安全问题</h2> <h3 id="xss跨站脚本攻击"><a href="#xss跨站脚本攻击" aria-hidden="true" class="header-anchor">#</a> xss跨站脚本攻击</h3> <div class="language-vue extra-class"><pre class="language-vue"><code>v-html
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">9/1/2018, 7:55:38 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/inventory/dist/doc/mp.html" class="prev">
          小程序
        </a></span> <span class="next"><a href="/inventory/dist/doc/arithmetic.html">
          算法
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/inventory/dist/assets/js/8.5da826ae.js" defer></script><script src="/inventory/dist/assets/js/app.13c8190b.js" defer></script>
  </body>
</html>
