(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{350:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react概念及面试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react概念及面试"}},[t._v("#")]),t._v(" React概念及面试")]),t._v(" "),s("h2",{attrs:{id:"对react理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对react理解"}},[t._v("#")]),t._v(" 对react理解")]),t._v(" "),s("ul",[s("li",[t._v("是什么: 用于构建"),s("code",[t._v("用户界面")]),t._v("的 "),s("code",[t._v("JavaScript")]),t._v(" 库")]),t._v(" "),s("li",[t._v("干什么: 可以通过"),s("code",[t._v("组件化")]),t._v("的方式构建快速相应的大型web应用")]),t._v(" "),s("li",[t._v("如果干:\n"),s("ul",[s("li",[s("code",[t._v("声明式")]),t._v(":\n"),s("ul",[s("li",[t._v("关注要做什么,而不是如何做")]),t._v(" "),s("li",[t._v("表达逻辑,不是定义步骤")])])]),t._v(" "),s("li",[s("code",[t._v("组件化")]),t._v(":")]),t._v(" "),s("li",[s("code",[t._v("一次学习,跨平台编写")])])])]),t._v(" "),s("li",[t._v("优点:\n"),s("ul",[s("li",[t._v("开发团队和社区强大")]),t._v(" "),s("li",[t._v("一次学习,跨平台")]),t._v(" "),s("li",[t._v("api简洁")])])]),t._v(" "),s("li",[t._v("缺点:\n"),s("ul",[s("li",[t._v("没有官方系统解决方案,选型成本高")]),t._v(" "),s("li",[t._v("过于灵活,不易写出高质量的应用")])])])]),t._v(" "),s("h2",{attrs:{id:"jsx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsx"}},[t._v("#")]),t._v(" JSX")]),t._v(" "),s("ul",[s("li",[t._v("是什么\n"),s("ul",[s("li",[t._v("一个"),s("code",[t._v("js的语法")]),t._v("扩展,更好的描述UI应该呈现的它应有交互的"),s("code",[t._v("本质")]),t._v("形式")]),t._v(" "),s("li",[t._v("其实是"),s("code",[t._v("React.createElement")]),t._v("或"),s("code",[t._v("require('react/jsx-runtime')()")]),t._v("的语法糖")])])]),t._v(" "),s("li",[t._v("实现目的\n"),s("ul",[s("li",[t._v("声明式")]),t._v(" "),s("li",[t._v("代码结构"),s("code",[t._v("清晰和简洁")]),t._v(","),s("code",[t._v("可读性")]),t._v("强")]),t._v(" "),s("li",[t._v("结构,属性,样式,事件实现"),s("code",[t._v("高聚合低耦合")])]),t._v(" "),s("li",[s("code",[t._v("没有引入")]),t._v("新的概念")])])]),t._v(" "),s("li",[t._v("其他方案\n"),s("ul",[s("li",[t._v("vue:template会引入其他概念: "),s("code",[t._v("v-on:click @click")])])])])]),t._v(" "),s("p",[s("strong",[t._v("jsx编译阶段的结果")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hello world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在react runtime为 classic")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*#__PURE__*/")]),t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"h1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, world!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// react runtime 为 automaic")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" jsx "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _jsx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react/jsx-runtime"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*#__PURE__*/")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_jsx")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"h1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, world!"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"虚拟dom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom"}},[t._v("#")]),t._v(" 虚拟dom")]),t._v(" "),s("ul",[s("li",[t._v("通过"),s("code",[t._v("React.createElement")]),t._v("函数返回的js对象")]),t._v(" "),s("li",[t._v("通过js对象去"),s("code",[t._v("描述")]),t._v("dom")]),t._v(" "),s("li",[t._v("优点\n"),s("ul",[s("li",[t._v("处理浏览器"),s("code",[t._v("兼容性")]),t._v("问题,避免用户操作真实dom")]),t._v(" "),s("li",[t._v("内容经过"),s("code",[t._v("xss")]),t._v("处理,可防止xss攻击")]),t._v(" "),s("li",[s("code",[t._v("跨平台")])]),t._v(" "),s("li",[t._v("在更新时可以进行"),s("code",[t._v("差异化更新")]),t._v(",减少dom的更新操作")])])]),t._v(" "),s("li",[t._v("缺点\n"),s("ul",[s("li",[t._v("虚拟dom需要"),s("code",[t._v("消耗额外的内存")])]),t._v(" "),s("li",[t._v("首次渲染"),s("code",[t._v("不一定")]),t._v("更快")])])])]),t._v(" "),s("p",[s("strong",[t._v("转换过程")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写代码阶段 ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hello world"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包编译")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行阶段")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("children")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello world'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"函数组件和类组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#函数组件和类组件"}},[t._v("#")]),t._v(" 函数组件和类组件")]),t._v(" "),s("ul",[s("li",[t._v("相同点\n"),s("ul",[s("li",[t._v("接收属性返回react元素")])])]),t._v(" "),s("li",[t._v("不同点\n"),s("ul",[s("li",[t._v("编程思想:\n"),s("ul",[s("li",[t._v("类组件: 创建实例,是面向对象的编程方法")]),t._v(" "),s("li",[t._v("函数组件: 不需要创建实例,是基于函数式编程")])])]),t._v(" "),s("li",[t._v("内存:\n"),s("ul",[s("li",[t._v("类组件: 需要创建和保存实例,会占用一定内存")]),t._v(" "),s("li",[t._v("函数组件: 不需要创建实例,可以节约内存")])])]),t._v(" "),s("li",[t._v("捕获特性:\n"),s("ul",[s("li",[t._v("函数组件具有值捕获特性")])])]),t._v(" "),s("li",[t._v("可测试性:\n"),s("ul",[s("li",[t._v("函数组件更方便单元测试")])])]),t._v(" "),s("li",[t._v("状态:\n"),s("ul",[s("li",[t._v("类组件和函数组件都可以有状态")])])]),t._v(" "),s("li",[t._v("生命周期:\n"),s("ul",[s("li",[t._v("类组件: 完整的生命周期")]),t._v(" "),s("li",[t._v("函数组件: 可以通过React.useEffect实现componentDidMount,componentDidUpdate,componentWillUnmount")])])]),t._v(" "),s("li",[t._v("逻辑复用\n"),s("ul",[s("li",[t._v("类组件: 组合, 继承, hoc")]),t._v(" "),s("li",[t._v("函数组件: 自定义hook")])])]),t._v(" "),s("li",[t._v("跳过更新:\n"),s("ul",[s("li",[t._v("类组件:\n"),s("ul",[s("li",[t._v("shouldComponentUpdate: 返回true更新,返回false不更新")]),t._v(" "),s("li",[t._v("PureComponent: 实现shouldComponent对新旧state和新旧props进行浅层比较")])])]),t._v(" "),s("li",[t._v("函数组件:\n"),s("ul",[s("li",[t._v("React.memo(Component,areEqual)")]),t._v(" "),s("li",[t._v("第二个参数"),s("code",[t._v("areEqual是否相等")]),t._v(":\n"),s("ul",[s("li",[t._v("可以对新旧props进行比较")]),t._v(" "),s("li",[t._v("返回true: 不更新")]),t._v(" "),s("li",[t._v("返回false: 更新")])])])])]),t._v(" "),s("li",[t._v("发展前景\n"),s("ul",[s("li",[t._v("未来函数组件会成为主流\n"),s("ul",[s("li",[t._v("屏蔽this")]),t._v(" "),s("li",[t._v("更好的复用逻辑")])])])])])])])])])]),t._v(" "),s("h2",{attrs:{id:"hook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[t._v("#")]),t._v(" hook")]),t._v(" "),s("blockquote",[s("p",[t._v("它可以让你在不编写 "),s("code",[t._v("class")]),t._v(" 的情况下使用 state 以及其他的 React 特性。")])]),t._v(" "),s("h3",{attrs:{id:"类组件的不足"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类组件的不足"}},[t._v("#")]),t._v(" 类组件的不足")]),t._v(" "),s("ul",[s("li",[t._v("缺少"),s("code",[t._v("逻辑复⽤")]),t._v("机制\n"),s("ul",[s("li",[t._v("为了复⽤逻辑增加⽆实际渲染效果的组件，增加了组件层级 显示⼗分臃肿 "),s("code",[t._v("HOC, render props")])]),t._v(" "),s("li",[t._v("增加了调试的难度以及运⾏效率的降低")])])]),t._v(" "),s("li",[t._v("类组件经常会变得很复杂难以维护\n"),s("ul",[s("li",[t._v("将⼀组相⼲的业务逻辑拆分到了"),s("code",[t._v("多个⽣命周期函数")]),t._v("中")]),t._v(" "),s("li",[t._v("在⼀个⽣命周期函数内存在多个不相⼲的业务逻辑")])])]),t._v(" "),s("li",[t._v("类成员⽅法不能保证"),s("code",[t._v("this")]),t._v("指向的正确性")])]),t._v(" "),s("h3",{attrs:{id:"动机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动机"}},[t._v("#")]),t._v(" 动机")]),t._v(" "),s("ul",[s("li",[t._v("在组件之间复用状态逻辑很难\n"),s("ul",[s("li",[t._v("Hook 使你在无需修改组件结构的情况下复用状态逻辑")])])]),t._v(" "),s("li",[t._v("复杂组件变得难以理解\n"),s("ul",[s("li",[t._v("Hook 将组件中相互关联的部分拆分成更小的函数")])])]),t._v(" "),s("li",[t._v("难以理解的 class\n"),s("ul",[s("li",[t._v("Hook 使你在非 class 的情况下可以使用更多的 React 特性")]),t._v(" "),s("li",[t._v("不适用this")])])])]),t._v(" "),s("h3",{attrs:{id:"规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#规则"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),s("ul",[s("li",[t._v("只在最顶层使用 Hook(函数组件或自定义hook的最顶层)\n"),s("ul",[s("li",[t._v("不要在循环，条件或嵌套函数中调用 Hook")])])]),t._v(" "),s("li",[t._v("只在 React 函数中调用 Hook\n"),s("ul",[s("li",[t._v("react函数组件")]),t._v(" "),s("li",[t._v("自定义hook里调用其他hook")])])])]),t._v(" "),s("h3",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("ul",[s("li",[t._v("在函数组件的fiber.alternate身上有之前的hooks存储数据\n"),s("ul",[s("li",[t._v("如果没有,则是挂载阶段")]),t._v(" "),s("li",[t._v("如果有, 则是更新阶段")])])]),t._v(" "),s("li",[t._v("每次执行函数组件挂载或更新函数组件时, 重置hookIndex索引")]),t._v(" "),s("li",[t._v("会根据索引去 初始化或获取原来的值, 执行完hook后则将索引移到下一位")]),t._v(" "),s("li",[t._v("然后给当前函数组件fiber赋值最新hooks")])]),t._v(" "),s("h2",{attrs:{id:"一些hook玩法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一些hook玩法"}},[t._v("#")]),t._v(" 一些hook玩法")]),t._v(" "),s("h3",{attrs:{id:"只有mount触发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#只有mount触发"}},[t._v("#")]),t._v(" 只有mount触发")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mountFn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMountRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isMountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            isMountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountFn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"只有更新时触发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#只有更新时触发"}},[t._v("#")]),t._v(" 只有更新时触发")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("updateFn")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isMountRef "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isMountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            isMountRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateFn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"强制更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#强制更新"}},[t._v("#")]),t._v(" 强制更新")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useForceUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forceUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" forceUpdate\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);